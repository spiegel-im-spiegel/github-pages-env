+++
title = "Sudo コマンドの脆弱性に関する覚え書き"
date =  "2019-10-16T15:44:23+09:00"
description = "いやぁ，この手のうっかりバグは他人事じゃないよね。"
image = "/images/attention/kitten.jpg"
tags  = [ "security", "vulnerability", "linux" ]
pageType = "text"
draft = true

[scripts]
  mathjax = false
  mermaidjs = false
+++

今回の [sudo] の脆弱性は [Ubuntu] が[迅速に対応](https://usn.ubuntu.com/4154-1/ "USN-4154-1: Sudo vulnerability | Ubuntu security notices")してくれたおかげであまり気にしてなかったんだけど，以下の記事を見て

- [Big Sky :: sudo の特権昇格バグはなぜ起こったのか](https://mattn.kaoriya.net/software/lang/c/20191016143950.htm)

ちょっと面白かったので覚え書きとして残しておくことにした[^ll1]。
いやぁ，この手のうっかりバグは他人事じゃないよね。
上の記事の最後の

[^ll1]: 念の為に言うと 4294967295 という数字は16進数なら 0xffffffff である。10進数だとピンとこないよね。

{{< fig-quote title="sudo の特権昇格バグはなぜ起こったのか" link="https://mattn.kaoriya.net/software/lang/c/20191016143950.htm" >}}
<q>境界値チェックを行わないと、死ぬ</q>
{{< /fig-quote >}}

は本当に教訓として心に留めておかないと。
って，もう私は職業エンジニアじゃないけど。

CVE ID は [CVE-2019-14287](https://nvd.nist.gov/vuln/detail/CVE-2019-14287)。
各ディストリビュータの評価は以下の通り。

- [Red Hat Customer Portal](https://access.redhat.com/security/cve/CVE-2019-14287)
    - CVSSv3 Vector: `CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H`
    - CVSSv3 Base Score: 7.8
    - CVSSv3 Severity: High

| 基本評価基準     | 評価値   |
| ---------------- | -------- |
| 攻撃元区分       | ローカル |
| 攻撃条件の複雑さ | 低       |
| 必要な特権レベル | 低       |
| ユーザ関与レベル | 不要     |
| スコープ         | 変更なし |
| 機密性への影響   | 高       |
| 完全性への影響   | 高       |
| 可用性への影響   | 高       |

- [CVE-2019-14287 | SUSE](https://www.suse.com/security/cve/CVE-2019-14287/)
    - CVSSv3 Vector: `CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:U/C:H/I:H/A:H`
    - CVSSv3 Base Score: 7.0
    - CVSSv3 Severity: High

| 基本評価基準     | 評価値   |
| ---------------- | -------- |
| 攻撃元区分       | ローカル |
| 攻撃条件の複雑さ | 高       |
| 必要な特権レベル | 低       |
| ユーザ関与レベル | 不要     |
| スコープ         | 変更なし |
| 機密性への影響   | 高       |
| 完全性への影響   | 高       |
| 可用性への影響   | 高       |

深刻度（Severity）が高いので早めのアップデートを。
アップデートは計画的に。

## ブックマーク

- [Linuxの「sudo」コマンドにroot権限奪取の脆弱性。ユーザーID処理のバグで制限無効化 - Engadget 日本版](https://japanese.engadget.com/2019/10/14/linux-sudo-root-id/)
- [Sudoコマンドの脆弱性報告--root権限でコマンド実行可能に - ZDNet Japan](https://japan.zdnet.com/article/35144045/)
- [USN-4154-1: Sudo vulnerability | Ubuntu security notices](https://usn.ubuntu.com/4154-1/)
- [SUSE-SU-2019:2656-1 | SUSE](https://www.suse.com/support/update/announcement/2019/suse-su-20192656-1/)

- [spiegel-im-spiegel/go-cvss: Common Vulnerability Scoring System (CVSS) Version 3](https://github.com/spiegel-im-spiegel/go-cvss) : 久しぶりに使ったけど，1年近くメンテしてないな

[Ubuntu]: https://www.ubuntu.com/ "The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu"
[Sudo]: https://www.sudo.ws/
[sudo]: https://www.sudo.ws/

## 参考図書

<div class="hreview">
  <div class="photo"><a class="item url" href="https://www.amazon.co.jp/dp/B07VJKJY7M?tag=baldandersinf-22&linkCode=ogi&th=1&psc=1"><img src="https://m.media-amazon.com/images/I/41WcUL9wdoL._SL160_.jpg" width="113" alt="photo"></a></div>
  <dl class="fn">
    <dt><a href="https://www.amazon.co.jp/dp/B07VJKJY7M?tag=baldandersinf-22&linkCode=ogi&th=1&psc=1">私はどのようにしてLinuxカーネルを学んだかゆたかさんの技術書</a></dt>
    <dd>平田豊 (著), MBビジネス研究班 (著), MBビジネス研究班 (編集)</dd>
    <dd>まんがびと 2019-07-26 (Release 2019-07-26)</dd>
    <dd>Kindle版</dd>
    <dd>B07VJKJY7M (ASIN)</dd>
    <dd>評価<abbr class="rating fa-sm" title="4">&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="far fa-star"></i></abbr></dd>
  </dl>
  <p class="description">読み物として面白かった。ペーペーの新人の頃を思い出しながら読んでたり。</p>
  <p class="powered-by">reviewed by <a href='#maker' class='reviewer'>Spiegel</a> on <abbr class="dtreviewed" title="2019-10-16">2019-10-16</abbr> (powered by <a href="https://affiliate.amazon.co.jp/assoc_credentials/home">PA-APIv5</a>)</p>
</div>
