+++
title = "#golang Unicode パッケージの脆弱性"
date =  "2020-06-17T10:34:55+09:00"
description = "golang.org/x/text/encoding/unicode パッケージで脆弱性が見つかった模様。"
image = "/images/attention/go-logo_blue.png"
tags  = [ "security", "vulnerability", "golang", "package", "unicode" ]
pageType = "text"

[scripts]
  mathjax = false
  mermaidjs = false
+++

[`golang.org/x/text/encoding/unicode`] パッケージで脆弱性が見つかった模様。

{{< fig-quote type="markdown" title="[security] Vulnerability in golang.org/x/text/encoding/unicode" link="https://groups.google.com/forum/#!topic/golang-announce/bXVeAmGOqz0" lang="en" >}}
Version v0.3.3 of [`golang.org/x/text`](http://golang.org/x/text) fixes a vulnerability in the [`golang.org/x/text/encoding/unicode`](http://golang.org/x/text/encoding/unicode) package which could lead to the UTF-16 decoder entering an infinite loop, causing the program to crash or run out of memory.

An attacker could provide a single byte to a [`UTF16`](https://pkg.go.dev/golang.org/x/text/encoding/unicode?tab=doc#UTF16) decoder instantiated with `UseBOM` or `ExpectBOM` to trigger an infinite loop if the [`String`](https://pkg.go.dev/golang.org/x/text/encoding?tab=doc#Decoder.String) function on the `Decoder` is called, or the `Decoder` is passed to [`golang.org/x/text/transform.String`](https://pkg.go.dev/golang.org/x/text/transform?tab=doc#String).
{{< /fig-quote >}}

というわけで，件のパッケージを使って UTF-16 符号化・復号化の操作を行っている場合は最新バージョンのパッケージに差し替えること。
とりあえず `go.mod` ファイルを見て

```text
require golang.org/x/text v0.3.2
```

とか v0.3.3 未満になっている場合は

```text
require golang.org/x/text latest
```

と最新版に書き換えてコンパイルし直せばいいだろう。

## [CVE-2020-14040]

- `CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H`
- 深刻度: 重要 (7.5)

| 基本評価基準     | 評価値       |
| ---------------- | ------------ |
| 攻撃元区分       | ネットワーク |
| 攻撃条件の複雑さ | 低           |
| 必要な特権レベル | 不要         |
| ユーザ関与レベル | 不要         |
| スコープ         | 変更なし     |
| 機密性への影響   | なし         |
| 完全性への影響   | なし         |
| 可用性への影響   | 高           |

[Go]: https://go.dev/
[Go 言語]: https://golang.org/ "The Go Programming Language"
[`golang.org/x/text/encoding/unicode`]: https://pkg.go.dev/golang.org/x/text/encoding/unicode "unicode package · pkg.go.dev"
[CVE-2020-14040]: https://nvd.nist.gov/vuln/detail/CVE-2020-14040

## 参考図書

{{% review-paapi "4621300253" %}} <!-- プログラミング言語Go -->
